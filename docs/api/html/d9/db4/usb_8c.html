<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SyterKit: src/drivers/usb/usb.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SyterKit
   &#160;<span id="projectnumber">0.2.4</span>
   </div>
   <div id="projectbrief">SyterKit is a bare-metal framework designed for Allwinner platform</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_c718a368270b13c54d94892d20736f45.html">drivers</a></li><li class="navelem"><a class="el" href="../../dir_9e8e5a059eeb6f5c7f3503f4222569a4.html">usb</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">usb.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;io.h&gt;</code><br />
<code>#include &lt;stdarg.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;types.h&gt;</code><br />
<code>#include &lt;<a class="el" href="../../dc/d54/common_8h_source.html">common.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d7/d7f/log_8h_source.html">log.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d2/df1/mmu_8h_source.html">mmu.h</a>&gt;</code><br />
<code>#include &lt;sys-clk.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d2/df0/gic_8h_source.html">gic.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/de4/usb_8h_source.html">usb.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d38/usb__controller_8h_source.html">usb_controller.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d4c/usb__defs_8h_source.html">usb_defs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/db0/usb__device_8h_source.html">usb_device.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for usb.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/de2/usb_8c__incl.png" border="0" usemap="#asrc_2drivers_2usb_2usb_8c" alt=""/></div>
<map name="asrc_2drivers_2usb_2usb_8c" id="asrc_2drivers_2usb_2usb_8c">
<area shape="rect" title=" " alt="" coords="1225,5,1379,32"/>
<area shape="rect" title=" " alt="" coords="1585,304,1632,331"/>
<area shape="rect" title=" " alt="" coords="1185,379,1259,405"/>
<area shape="rect" title=" " alt="" coords="1003,304,1086,331"/>
<area shape="rect" title=" " alt="" coords="1110,304,1185,331"/>
<area shape="rect" title=" " alt="" coords="640,304,711,331"/>
<area shape="rect" title=" " alt="" coords="855,453,925,480"/>
<area shape="rect" href="../../dc/d54/common_8h.html" title=" " alt="" coords="763,229,854,256"/>
<area shape="rect" href="../../d7/d7f/log_8h.html" title=" " alt="" coords="233,229,288,256"/>
<area shape="rect" href="../../d2/df1/mmu_8h.html" title=" " alt="" coords="489,80,557,107"/>
<area shape="rect" title=" " alt="" coords="1390,80,1470,107"/>
<area shape="rect" href="../../d2/df0/gic_8h.html" title=" " alt="" coords="929,229,982,256"/>
<area shape="rect" href="../../dc/de4/usb_8h.html" title=" " alt="" coords="1495,80,1552,107"/>
<area shape="rect" href="../../d6/d38/usb__controller_8h.html" title=" " alt="" coords="1109,155,1234,181"/>
<area shape="rect" href="../../d7/d4c/usb__defs_8h.html" title=" " alt="" coords="1723,80,1815,107"/>
<area shape="rect" href="../../df/db0/usb__device_8h.html" title=" " alt="" coords="1339,155,1446,181"/>
<area shape="rect" title=" " alt="" coords="227,304,295,331"/>
<area shape="rect" title=" " alt="" coords="116,304,203,331"/>
<area shape="rect" href="../../d8/df2/include_2xformat_8h.html" title=" " alt="" coords="371,304,457,331"/>
<area shape="rect" href="../../d7/de6/include_2string_8h.html" title=" " alt="" coords="540,379,611,405"/>
<area shape="rect" href="../../df/ddb/arm32_2timer_8h.html" title=" " alt="" coords="392,155,460,181"/>
<area shape="rect" href="../../d8/df5/include_2arch_2arm32_2io_8h.html" title=" " alt="" coords="95,229,141,256"/>
<area shape="rect" href="../../d6/dfc/include_2arch_2arm32_2types_8h.html" title=" " alt="" coords="364,229,435,256"/>
<area shape="rect" title=" " alt="" coords="5,304,92,331"/>
<area shape="rect" href="../../d5/da3/reg-usb_8h.html" title=" " alt="" coords="1412,229,1520,256"/>
<area shape="rect" title=" " alt="" coords="1341,304,1429,331"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6d906c51d39530891897589b3bf02425"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a6d906c51d39530891897589b3bf02425">SUNXI_USB_EP0_BUFFER_SIZE</a>&#160;&#160;&#160;(512)</td></tr>
<tr class="separator:a6d906c51d39530891897589b3bf02425"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac144ac669fed1c1bef0f6879de760a17"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#ac144ac669fed1c1bef0f6879de760a17">HIGH_SPEED_EP_MAX_PACKET_SIZE</a>&#160;&#160;&#160;(512)</td></tr>
<tr class="separator:ac144ac669fed1c1bef0f6879de760a17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31e0150a371c45a8546adf318ff5026f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a31e0150a371c45a8546adf318ff5026f">FULL_SPEED_EP_MAX_PACKET_SIZE</a>&#160;&#160;&#160;(64)</td></tr>
<tr class="separator:a31e0150a371c45a8546adf318ff5026f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3643add14a5c1748552f195d045eab6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#ac3643add14a5c1748552f195d045eab6">BULK_FIFOSIZE</a>&#160;&#160;&#160;(512)</td></tr>
<tr class="separator:ac3643add14a5c1748552f195d045eab6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ffd460647ecd927786c7d3db9297e05"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a9ffd460647ecd927786c7d3db9297e05">RX_BUFF_SIZE</a>&#160;&#160;&#160;(512)</td></tr>
<tr class="separator:a9ffd460647ecd927786c7d3db9297e05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3811ccf5534081068e019032702a01f3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a3811ccf5534081068e019032702a01f3">SUNXI_USB_CTRL_EP_INDEX</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a3811ccf5534081068e019032702a01f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab598800165f0788e31f58d0929a8974a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#ab598800165f0788e31f58d0929a8974a">SUNXI_USB_BULK_IN_EP_INDEX</a>&#160;&#160;&#160;1  /* tx */</td></tr>
<tr class="separator:ab598800165f0788e31f58d0929a8974a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b316b779832fe593e69f43ed4b9ea1e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a7b316b779832fe593e69f43ed4b9ea1e">SUNXI_USB_BULK_OUT_EP_INDEX</a>&#160;&#160;&#160;2 /* rx */</td></tr>
<tr class="separator:a7b316b779832fe593e69f43ed4b9ea1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aea0f5e6dad592ba20de5a15fa74ccb1d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#aea0f5e6dad592ba20de5a15fa74ccb1d">sunxi_usb_clear_all_irq</a> (void)</td></tr>
<tr class="memdesc:aea0f5e6dad592ba20de5a15fa74ccb1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear all USB interrupts.  <a href="../../d9/db4/usb_8c.html#aea0f5e6dad592ba20de5a15fa74ccb1d">More...</a><br /></td></tr>
<tr class="separator:aea0f5e6dad592ba20de5a15fa74ccb1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30b9725491e967a89e4a8f13020fecfd"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a30b9725491e967a89e4a8f13020fecfd">sunxi_usb_read_complete</a> (<a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a6d57c383c80c05cc98c05d6dfec72756">uint64_t</a> husb, <a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a> ep_type, <a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a> complete)</td></tr>
<tr class="memdesc:a30b9725491e967a89e4a8f13020fecfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle the completion of a USB data read operation.  <a href="../../d9/db4/usb_8c.html#a30b9725491e967a89e4a8f13020fecfd">More...</a><br /></td></tr>
<tr class="separator:a30b9725491e967a89e4a8f13020fecfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a629d56bf2c3121648905786afac04311"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a629d56bf2c3121648905786afac04311">sunxi_usb_write_complete</a> (<a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a6d57c383c80c05cc98c05d6dfec72756">uint64_t</a> husb, <a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a> ep_type, <a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a> complete)</td></tr>
<tr class="memdesc:a629d56bf2c3121648905786afac04311"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle USB write complete event.  <a href="../../d9/db4/usb_8c.html#a629d56bf2c3121648905786afac04311">More...</a><br /></td></tr>
<tr class="separator:a629d56bf2c3121648905786afac04311"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e87520bc4757da6c63cb9c76f9981c3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a2e87520bc4757da6c63cb9c76f9981c3">sunxi_usb_write_fifo</a> (<a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#af7aa217d9ae1abca94f93e4052ee9689">uint8_t</a> *buffer, <a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a> buffer_size)</td></tr>
<tr class="memdesc:a2e87520bc4757da6c63cb9c76f9981c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write data to the USB FIFO.  <a href="../../d9/db4/usb_8c.html#a2e87520bc4757da6c63cb9c76f9981c3">More...</a><br /></td></tr>
<tr class="separator:a2e87520bc4757da6c63cb9c76f9981c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a158e8af364a9f8502d37e2d9c226147d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a158e8af364a9f8502d37e2d9c226147d">sunxi_usb_read_ep0_data</a> (void *buffer, <a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a> data_type)</td></tr>
<tr class="memdesc:a158e8af364a9f8502d37e2d9c226147d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from endpoint 0 of the USB device.  <a href="../../d9/db4/usb_8c.html#a158e8af364a9f8502d37e2d9c226147d">More...</a><br /></td></tr>
<tr class="separator:a158e8af364a9f8502d37e2d9c226147d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb45d93aec55afa1a04722f80351d5eb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#acb45d93aec55afa1a04722f80351d5eb">sunxi_usb_perform_set_address</a> (<a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#af7aa217d9ae1abca94f93e4052ee9689">uint8_t</a> address)</td></tr>
<tr class="memdesc:acb45d93aec55afa1a04722f80351d5eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the USB device address.  <a href="../../d9/db4/usb_8c.html#acb45d93aec55afa1a04722f80351d5eb">More...</a><br /></td></tr>
<tr class="separator:acb45d93aec55afa1a04722f80351d5eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a031023d6f58f8554cf6fb7b911ec6bdb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a031023d6f58f8554cf6fb7b911ec6bdb">ep0_recv_op</a> (void)</td></tr>
<tr class="memdesc:a031023d6f58f8554cf6fb7b911ec6bdb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive and process data on EP0.  <a href="../../d9/db4/usb_8c.html#a031023d6f58f8554cf6fb7b911ec6bdb">More...</a><br /></td></tr>
<tr class="separator:a031023d6f58f8554cf6fb7b911ec6bdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0a27f85adc68617bc414e0ed57c444f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#ab0a27f85adc68617bc414e0ed57c444f">eptx_send_op</a> ()</td></tr>
<tr class="memdesc:ab0a27f85adc68617bc414e0ed57c444f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send data on EP0.  <a href="../../d9/db4/usb_8c.html#ab0a27f85adc68617bc414e0ed57c444f">More...</a><br /></td></tr>
<tr class="separator:ab0a27f85adc68617bc414e0ed57c444f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c4e5d58a390ce29efb9bc8c342e06a2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a2c4e5d58a390ce29efb9bc8c342e06a2">sunxi_usb_recv_by_dma_isr</a> (void *p_arg)</td></tr>
<tr class="separator:a2c4e5d58a390ce29efb9bc8c342e06a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67926a4321267f069a1e1b0f278bcac5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a67926a4321267f069a1e1b0f278bcac5">sunxi_usb_send_by_dma_isr</a> (void *p_arg)</td></tr>
<tr class="separator:a67926a4321267f069a1e1b0f278bcac5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05f7b05026f5f9a9d588a3903db5fc2e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a05f7b05026f5f9a9d588a3903db5fc2e">eprx_recv_op</a> (void)</td></tr>
<tr class="separator:a05f7b05026f5f9a9d588a3903db5fc2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b9936ac7774361484af3c66c0f189d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a9b9936ac7774361484af3c66c0f189d0">sunxi_usb_attach_module</a> (<a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a> device_type)</td></tr>
<tr class="memdesc:a9b9936ac7774361484af3c66c0f189d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attach a module to the USB controller.  <a href="../../d9/db4/usb_8c.html#a9b9936ac7774361484af3c66c0f189d0">More...</a><br /></td></tr>
<tr class="separator:a9b9936ac7774361484af3c66c0f189d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8b85e64898cb909e942f0af8aa9c3ea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#aa8b85e64898cb909e942f0af8aa9c3ea">sunxi_usb_init</a> ()</td></tr>
<tr class="memdesc:aa8b85e64898cb909e942f0af8aa9c3ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the USB controller.  <a href="../../d9/db4/usb_8c.html#aa8b85e64898cb909e942f0af8aa9c3ea">More...</a><br /></td></tr>
<tr class="separator:aa8b85e64898cb909e942f0af8aa9c3ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ea12abfc03c85cec42f80ba22941d39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a9ea12abfc03c85cec42f80ba22941d39">sunxi_usb_ep_reset</a> (void)</td></tr>
<tr class="memdesc:a9ea12abfc03c85cec42f80ba22941d39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset all endpoints of the USB controller.  <a href="../../d9/db4/usb_8c.html#a9ea12abfc03c85cec42f80ba22941d39">More...</a><br /></td></tr>
<tr class="separator:a9ea12abfc03c85cec42f80ba22941d39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7335d28b94ef356da33d972fdd3cd5db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a7335d28b94ef356da33d972fdd3cd5db">sunxi_usb_irq</a> ()</td></tr>
<tr class="memdesc:a7335d28b94ef356da33d972fdd3cd5db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle the USB interrupt.  <a href="../../d9/db4/usb_8c.html#a7335d28b94ef356da33d972fdd3cd5db">More...</a><br /></td></tr>
<tr class="separator:a7335d28b94ef356da33d972fdd3cd5db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74072dd55f50a5939e2db896cde0432a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a74072dd55f50a5939e2db896cde0432a">sunxi_usb_attach</a> ()</td></tr>
<tr class="memdesc:a74072dd55f50a5939e2db896cde0432a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attach the USB device to the USB controller.  <a href="../../d9/db4/usb_8c.html#a74072dd55f50a5939e2db896cde0432a">More...</a><br /></td></tr>
<tr class="separator:a74072dd55f50a5939e2db896cde0432a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26be9d1637c92c63eac6fa54b8958461"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a26be9d1637c92c63eac6fa54b8958461">sunxi_usb_extern_loop</a> ()</td></tr>
<tr class="memdesc:a26be9d1637c92c63eac6fa54b8958461"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the USB device state machine loop once.  <a href="../../d9/db4/usb_8c.html#a26be9d1637c92c63eac6fa54b8958461">More...</a><br /></td></tr>
<tr class="separator:a26be9d1637c92c63eac6fa54b8958461"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9be93edc440505dbd4ad1ddba3e7a32f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a9be93edc440505dbd4ad1ddba3e7a32f">sunxi_usb_bulk_ep_reset</a> ()</td></tr>
<tr class="memdesc:a9be93edc440505dbd4ad1ddba3e7a32f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the bulk endpoints of the USB controller.  <a href="../../d9/db4/usb_8c.html#a9be93edc440505dbd4ad1ddba3e7a32f">More...</a><br /></td></tr>
<tr class="separator:a9be93edc440505dbd4ad1ddba3e7a32f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7848df1ff28daae75df3755ff0942c4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#af7848df1ff28daae75df3755ff0942c4">sunxi_usb_start_recv_by_dma</a> (void *mem_base, <a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a> <a class="el" href="../../dc/de4/usb_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">length</a>)</td></tr>
<tr class="memdesc:af7848df1ff28daae75df3755ff0942c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start receiving data by DMA.  <a href="../../d9/db4/usb_8c.html#af7848df1ff28daae75df3755ff0942c4">More...</a><br /></td></tr>
<tr class="separator:af7848df1ff28daae75df3755ff0942c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56c124828f8698eb09691e336e45aee1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a56c124828f8698eb09691e336e45aee1">sunxi_usb_send_setup</a> (<a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a> <a class="el" href="../../dc/de4/usb_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">length</a>, void *buffer)</td></tr>
<tr class="memdesc:a56c124828f8698eb09691e336e45aee1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a setup packet.  <a href="../../d9/db4/usb_8c.html#a56c124828f8698eb09691e336e45aee1">More...</a><br /></td></tr>
<tr class="separator:a56c124828f8698eb09691e336e45aee1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09a492d86e5c938734580a45b8b37ab"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#ad09a492d86e5c938734580a45b8b37ab">sunxi_usb_set_address</a> (<a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a> address)</td></tr>
<tr class="memdesc:ad09a492d86e5c938734580a45b8b37ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set USB device address.  <a href="../../d9/db4/usb_8c.html#ad09a492d86e5c938734580a45b8b37ab">More...</a><br /></td></tr>
<tr class="separator:ad09a492d86e5c938734580a45b8b37ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab50074c697afdcf75bfbb1366a85d160"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#ab50074c697afdcf75bfbb1366a85d160">sunxi_usb_send_data</a> (void *buffer, <a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a> buffer_size)</td></tr>
<tr class="memdesc:ab50074c697afdcf75bfbb1366a85d160"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send data over USB.  <a href="../../d9/db4/usb_8c.html#ab50074c697afdcf75bfbb1366a85d160">More...</a><br /></td></tr>
<tr class="separator:ab50074c697afdcf75bfbb1366a85d160"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96a089299c259475dda0a32eb8d9f537"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a96a089299c259475dda0a32eb8d9f537">sunxi_usb_get_ep_max</a> (void)</td></tr>
<tr class="memdesc:a96a089299c259475dda0a32eb8d9f537"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the maximum number of endpoints.  <a href="../../d9/db4/usb_8c.html#a96a089299c259475dda0a32eb8d9f537">More...</a><br /></td></tr>
<tr class="separator:a96a089299c259475dda0a32eb8d9f537"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a021ae43dd03aeb857074f567328cc03a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a021ae43dd03aeb857074f567328cc03a">sunxi_usb_get_ep_in_type</a> (void)</td></tr>
<tr class="memdesc:a021ae43dd03aeb857074f567328cc03a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the IN endpoint type.  <a href="../../d9/db4/usb_8c.html#a021ae43dd03aeb857074f567328cc03a">More...</a><br /></td></tr>
<tr class="separator:a021ae43dd03aeb857074f567328cc03a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cee1c7f18a739e7caa410443d986519"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a1cee1c7f18a739e7caa410443d986519">sunxi_usb_get_ep_out_type</a> (void)</td></tr>
<tr class="memdesc:a1cee1c7f18a739e7caa410443d986519"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the OUT endpoint type.  <a href="../../d9/db4/usb_8c.html#a1cee1c7f18a739e7caa410443d986519">More...</a><br /></td></tr>
<tr class="separator:a1cee1c7f18a739e7caa410443d986519"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17188318b8af68f5530372284e46a12d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a17188318b8af68f5530372284e46a12d">sunxi_usb_dump</a> (<a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a> usbc_base, <a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a> ep_index)</td></tr>
<tr class="memdesc:a17188318b8af68f5530372284e46a12d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dump the USB controller registers for a specific endpoint.  <a href="../../d9/db4/usb_8c.html#a17188318b8af68f5530372284e46a12d">More...</a><br /></td></tr>
<tr class="separator:a17188318b8af68f5530372284e46a12d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2e8d3e6235fe5225f699770b43c3b2d3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#af7aa217d9ae1abca94f93e4052ee9689">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a2e8d3e6235fe5225f699770b43c3b2d3">sunxi_usb_ep0_buffer</a> [<a class="el" href="../../d9/db4/usb_8c.html#a6d906c51d39530891897589b3bf02425">SUNXI_USB_EP0_BUFFER_SIZE</a>]</td></tr>
<tr class="separator:a2e8d3e6235fe5225f699770b43c3b2d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb07ee7a62c92e37413d839f2862742c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dc/de4/usb_8h.html#aa2df59490f6a261d55e1697c86ccfbef">sunxi_ubuf_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#adb07ee7a62c92e37413d839f2862742c">sunxi_ubuf</a></td></tr>
<tr class="separator:adb07ee7a62c92e37413d839f2862742c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0026169528a4e5b0a1c74953fc606c71"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/de4/usb_8h.html#a7493841d696969118eb6fc9c1c02322a">sunxi_udc_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a0026169528a4e5b0a1c74953fc606c71">sunxi_udc_source</a></td></tr>
<tr class="separator:a0026169528a4e5b0a1c74953fc606c71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c6e7ef4efec7a789e8041368c60ab3a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/de4/usb_8h.html#a24f88480424e71d7b3b79b183fb7f791">sunxi_usb_setup_req_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a0c6e7ef4efec7a789e8041368c60ab3a">sunxi_udev_active</a></td></tr>
<tr class="separator:a0c6e7ef4efec7a789e8041368c60ab3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a358bc99c1d11a8c6dc90873ea0166204"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#af7aa217d9ae1abca94f93e4052ee9689">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a358bc99c1d11a8c6dc90873ea0166204">usb_dma_trans_unaliged_bytes</a></td></tr>
<tr class="separator:a358bc99c1d11a8c6dc90873ea0166204"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad619a13180f18e56723d5ed0bf9940f8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#af7aa217d9ae1abca94f93e4052ee9689">uint8_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#ad619a13180f18e56723d5ed0bf9940f8">usb_dma_trans_unaligned_buf</a></td></tr>
<tr class="separator:ad619a13180f18e56723d5ed0bf9940f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea269807f49604f699c54ead46a5a723"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#aea269807f49604f699c54ead46a5a723">dma_rec_flag</a></td></tr>
<tr class="separator:aea269807f49604f699c54ead46a5a723"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa890440fed5074f25f530c81347b21ed"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a6d57c383c80c05cc98c05d6dfec72756">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#aa890440fed5074f25f530c81347b21ed">dma_rec_addr</a></td></tr>
<tr class="separator:aa890440fed5074f25f530c81347b21ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59c84d87a896229949240ebc45d5e4c1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a6d57c383c80c05cc98c05d6dfec72756">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db4/usb_8c.html#a59c84d87a896229949240ebc45d5e4c1">dma_rec_size</a></td></tr>
<tr class="separator:a59c84d87a896229949240ebc45d5e4c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ac3643add14a5c1748552f195d045eab6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3643add14a5c1748552f195d045eab6">&#9670;&nbsp;</a></span>BULK_FIFOSIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BULK_FIFOSIZE&#160;&#160;&#160;(512)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a31e0150a371c45a8546adf318ff5026f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31e0150a371c45a8546adf318ff5026f">&#9670;&nbsp;</a></span>FULL_SPEED_EP_MAX_PACKET_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FULL_SPEED_EP_MAX_PACKET_SIZE&#160;&#160;&#160;(64)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac144ac669fed1c1bef0f6879de760a17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac144ac669fed1c1bef0f6879de760a17">&#9670;&nbsp;</a></span>HIGH_SPEED_EP_MAX_PACKET_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HIGH_SPEED_EP_MAX_PACKET_SIZE&#160;&#160;&#160;(512)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9ffd460647ecd927786c7d3db9297e05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ffd460647ecd927786c7d3db9297e05">&#9670;&nbsp;</a></span>RX_BUFF_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RX_BUFF_SIZE&#160;&#160;&#160;(512)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab598800165f0788e31f58d0929a8974a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab598800165f0788e31f58d0929a8974a">&#9670;&nbsp;</a></span>SUNXI_USB_BULK_IN_EP_INDEX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SUNXI_USB_BULK_IN_EP_INDEX&#160;&#160;&#160;1  /* tx */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7b316b779832fe593e69f43ed4b9ea1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b316b779832fe593e69f43ed4b9ea1e">&#9670;&nbsp;</a></span>SUNXI_USB_BULK_OUT_EP_INDEX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SUNXI_USB_BULK_OUT_EP_INDEX&#160;&#160;&#160;2 /* rx */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3811ccf5534081068e019032702a01f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3811ccf5534081068e019032702a01f3">&#9670;&nbsp;</a></span>SUNXI_USB_CTRL_EP_INDEX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SUNXI_USB_CTRL_EP_INDEX&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6d906c51d39530891897589b3bf02425"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d906c51d39530891897589b3bf02425">&#9670;&nbsp;</a></span>SUNXI_USB_EP0_BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SUNXI_USB_EP0_BUFFER_SIZE&#160;&#160;&#160;(512)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a031023d6f58f8554cf6fb7b911ec6bdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a031023d6f58f8554cf6fb7b911ec6bdb">&#9670;&nbsp;</a></span>ep0_recv_op()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ep0_recv_op </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Receive and process data on EP0. </p>
<p>This function receives and processes data on Endpoint 0 (EP0). It clears stall status, checks if setup end is cleared, and checks if the read data on EP0 is ready. Depending on the type of USB request, it performs different operations.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, or a negative error code on failure. </dd></dl>

</div>
</div>
<a id="a05f7b05026f5f9a9d588a3903db5fc2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05f7b05026f5f9a9d588a3903db5fc2e">&#9670;&nbsp;</a></span>eprx_recv_op()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int eprx_recv_op </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab0a27f85adc68617bc414e0ed57c444f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0a27f85adc68617bc414e0ed57c444f">&#9670;&nbsp;</a></span>eptx_send_op()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int eptx_send_op </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send data on EP0. </p>
<p>This function send data on Endpoint 0 (EP0). </p><dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, or a negative error code on failure. </dd></dl>

</div>
</div>
<a id="a74072dd55f50a5939e2db896cde0432a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74072dd55f50a5939e2db896cde0432a">&#9670;&nbsp;</a></span>sunxi_usb_attach()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sunxi_usb_attach </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attach the USB device to the USB controller. </p>
<p>This function attaches the USB device to the USB controller and enters a loop to handle USB events. It continuously checks for pending USB interrupts, handles the USB interrupt by calling <a class="el" href="../../dc/de4/usb_8h.html#a7335d28b94ef356da33d972fdd3cd5db" title="Handle the USB interrupt.">sunxi_usb_irq()</a>, and then processes the USB device state by calling sunxi_udev_active-&gt;state_loop(&amp;sunxi_ubuf) multiple times.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<a id="a9b9936ac7774361484af3c66c0f189d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b9936ac7774361484af3c66c0f189d0">&#9670;&nbsp;</a></span>sunxi_usb_attach_module()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sunxi_usb_attach_module </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a>&#160;</td>
          <td class="paramname"><em>device_type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attach a module to the USB controller. </p>
<p>This function attaches a module to the USB controller. It registers the specified USB module and switches to the specified device type. Currently, two types of devices are supported: USB device detect and USB mass storage. If an unknown device type is specified, an error message is printed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device_type</td><td>The type of the device to attach<ul>
<li>SUNXI_USB_DEVICE_DETECT: USB device detect module</li>
<li>SUNXI_USB_DEVICE_MASS: USB mass storage module</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<a id="a9be93edc440505dbd4ad1ddba3e7a32f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9be93edc440505dbd4ad1ddba3e7a32f">&#9670;&nbsp;</a></span>sunxi_usb_bulk_ep_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sunxi_usb_bulk_ep_reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the bulk endpoints of the USB controller. </p>
<p>This function resets the bulk endpoints of the Allwinner A64 USB controller. It configures the bulk-in and bulk-out endpoints for data transfer. The steps involved are as follows:</p>
<ol type="1">
<li>Get the index of the currently active endpoint.</li>
<li>Configure the bulk-in endpoint for transmitting data to the host.<ul>
<li>Set the transfer type to bulk (USBC_TS_TYPE_BULK).</li>
<li>Set the endpoint type to transmit (USBC_EP_TYPE_TX).</li>
<li>Set the maximum packet size for the endpoint based on sunxi_udc_source.bulk_ep_max.</li>
<li>Configure the FIFO buffer with a size of sunxi_udc_source.fifo_size and the base address sunxi_udc_source.bulk_out_addr.</li>
<li>Enable interrupts for the endpoint.</li>
</ul>
</li>
<li>Configure the bulk-out endpoint for receiving data from the host.<ul>
<li>Set the transfer type to bulk (USBC_TS_TYPE_BULK).</li>
<li>Set the endpoint type to receive (USBC_EP_TYPE_RX).</li>
<li>Set the maximum packet size for the endpoint based on sunxi_udc_source.bulk_ep_max.</li>
<li>Configure the FIFO buffer with a size of sunxi_udc_source.fifo_size and the base address sunxi_udc_source.bulk_in_addr.</li>
<li>Enable interrupts for the endpoint.</li>
</ul>
</li>
<li>Restore the previously active endpoint.</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<a id="aea0f5e6dad592ba20de5a15fa74ccb1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea0f5e6dad592ba20de5a15fa74ccb1d">&#9670;&nbsp;</a></span>sunxi_usb_clear_all_irq()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sunxi_usb_clear_all_irq </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clear all USB interrupts. </p>
<p>This function clears all pending USB interrupts, including endpoint transmit (TX) and receive (RX) interrupts, as well as miscellaneous interrupts. </p>

</div>
</div>
<a id="a17188318b8af68f5530372284e46a12d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17188318b8af68f5530372284e46a12d">&#9670;&nbsp;</a></span>sunxi_usb_dump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sunxi_usb_dump </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a>&#160;</td>
          <td class="paramname"><em>usbc_base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a>&#160;</td>
          <td class="paramname"><em>ep_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dump the USB controller registers for a specific endpoint. </p>
<p>This function dumps the USB controller registers for a specific endpoint of the Allwinner A64 USB controller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">usbc_base</td><td>The base address of the USB controller </td></tr>
    <tr><td class="paramname">ep_index</td><td>The index of the endpoint to dump registers for </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<a id="a9ea12abfc03c85cec42f80ba22941d39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ea12abfc03c85cec42f80ba22941d39">&#9670;&nbsp;</a></span>sunxi_usb_ep_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sunxi_usb_ep_reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset all endpoints of the USB controller. </p>
<p>This function resets all endpoints of the Allwinner A64 USB controller by calling the <a class="el" href="../../dc/de4/usb_8h.html#a9be93edc440505dbd4ad1ddba3e7a32f" title="Reset the bulk endpoints of the USB controller.">sunxi_usb_bulk_ep_reset()</a> function to reset the bulk endpoints.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<a id="a26be9d1637c92c63eac6fa54b8958461"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26be9d1637c92c63eac6fa54b8958461">&#9670;&nbsp;</a></span>sunxi_usb_extern_loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sunxi_usb_extern_loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run the USB device state machine loop once. </p>
<p>This function runs the USB device state machine loop once by calling sunxi_udev_active-&gt;state_loop(&amp;sunxi_ubuf) and returning the result.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The result of sunxi_udev_active-&gt;state_loop(&amp;sunxi_ubuf) </dd></dl>

</div>
</div>
<a id="a021ae43dd03aeb857074f567328cc03a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a021ae43dd03aeb857074f567328cc03a">&#9670;&nbsp;</a></span>sunxi_usb_get_ep_in_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sunxi_usb_get_ep_in_type </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the IN endpoint type. </p>
<p>This function returns the type of the IN endpoint.</p>
<dl class="section return"><dt>Returns</dt><dd>The IN endpoint type </dd></dl>

</div>
</div>
<a id="a96a089299c259475dda0a32eb8d9f537"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96a089299c259475dda0a32eb8d9f537">&#9670;&nbsp;</a></span>sunxi_usb_get_ep_max()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sunxi_usb_get_ep_max </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the maximum number of endpoints. </p>
<p>This function returns the maximum number of endpoints supported by the USB controller.</p>
<dl class="section return"><dt>Returns</dt><dd>The maximum number of endpoints </dd></dl>

</div>
</div>
<a id="a1cee1c7f18a739e7caa410443d986519"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cee1c7f18a739e7caa410443d986519">&#9670;&nbsp;</a></span>sunxi_usb_get_ep_out_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sunxi_usb_get_ep_out_type </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the OUT endpoint type. </p>
<p>This function returns the type of the OUT endpoint.</p>
<dl class="section return"><dt>Returns</dt><dd>The OUT endpoint type </dd></dl>

</div>
</div>
<a id="aa8b85e64898cb909e942f0af8aa9c3ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8b85e64898cb909e942f0af8aa9c3ea">&#9670;&nbsp;</a></span>sunxi_usb_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sunxi_usb_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the USB controller. </p>
<p>This function initializes the USB controller. It first checks if it can successfully initialize the USB device, then initializes the UDC controller source and requests DMA channels for data sending and receiving. Next, it configures the USB device by setting the transfer mode and speed, configuring DMA, etc. Finally, it enables interrupts and opens the USB device.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7335d28b94ef356da33d972fdd3cd5db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7335d28b94ef356da33d972fdd3cd5db">&#9670;&nbsp;</a></span>sunxi_usb_irq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sunxi_usb_irq </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle the USB interrupt. </p>
<p>This function is responsible for handling various USB interrupts, including RESET, RESUME, SUSPEND, DISCONNECT, SOF, endpoint 0 (EP0), and data transfers for both transmit (TX) and receive (RX) endpoints. It also handles DMA interrupts for both TX and RX endpoints.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

</div>
</div>
<a id="acb45d93aec55afa1a04722f80351d5eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb45d93aec55afa1a04722f80351d5eb">&#9670;&nbsp;</a></span>sunxi_usb_perform_set_address()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int sunxi_usb_perform_set_address </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#af7aa217d9ae1abca94f93e4052ee9689">uint8_t</a>&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the USB device address. </p>
<p>This function sets the USB device address and updates the speed and FIFO size based on the transfer mode of the USB controller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>The USB device address to be set.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns SUNXI_USB_REQ_SUCCESSED on success, or a negative error code on failure. </dd></dl>

</div>
</div>
<a id="a30b9725491e967a89e4a8f13020fecfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30b9725491e967a89e4a8f13020fecfd">&#9670;&nbsp;</a></span>sunxi_usb_read_complete()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sunxi_usb_read_complete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a6d57c383c80c05cc98c05d6dfec72756">uint64_t</a>&#160;</td>
          <td class="paramname"><em>husb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a>&#160;</td>
          <td class="paramname"><em>ep_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a>&#160;</td>
          <td class="paramname"><em>complete</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle the completion of a USB data read operation. </p>
<p>This function handles the completion of a USB data read operation, updating the status and clearing any relevant interrupts.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">husb</td><td>The USB controller handle. </td></tr>
    <tr><td class="paramname">ep_type</td><td>The type of endpoint where the read operation was performed. </td></tr>
    <tr><td class="paramname">complete</td><td>A flag indicating whether the read operation completed successfully or not. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a158e8af364a9f8502d37e2d9c226147d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a158e8af364a9f8502d37e2d9c226147d">&#9670;&nbsp;</a></span>sunxi_usb_read_ep0_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int sunxi_usb_read_ep0_data </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a>&#160;</td>
          <td class="paramname"><em>data_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read data from endpoint 0 of the USB device. </p>
<p>This function reads data from endpoint 0 of the USB device and stores it in the provided buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Pointer to the buffer where the read data will be stored. </td></tr>
    <tr><td class="paramname">data_type</td><td>Optional parameter indicating the type of data being read.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, or a negative error code on failure. </dd></dl>

</div>
</div>
<a id="a2c4e5d58a390ce29efb9bc8c342e06a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c4e5d58a390ce29efb9bc8c342e06a2">&#9670;&nbsp;</a></span>sunxi_usb_recv_by_dma_isr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sunxi_usb_recv_by_dma_isr </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a67926a4321267f069a1e1b0f278bcac5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67926a4321267f069a1e1b0f278bcac5">&#9670;&nbsp;</a></span>sunxi_usb_send_by_dma_isr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sunxi_usb_send_by_dma_isr </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab50074c697afdcf75bfbb1366a85d160"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab50074c697afdcf75bfbb1366a85d160">&#9670;&nbsp;</a></span>sunxi_usb_send_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sunxi_usb_send_data </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a>&#160;</td>
          <td class="paramname"><em>buffer_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send data over USB. </p>
<p>This function sends data over USB. It sets the rx_ready_for_data flag to 0 in the <a class="el" href="../../df/df3/structsunxi__ubuf.html">sunxi_ubuf</a> structure and calls <a class="el" href="../../d9/db4/usb_8c.html#a2e87520bc4757da6c63cb9c76f9981c3" title="Write data to the USB FIFO.">sunxi_usb_write_fifo()</a> to write the data to the USB FIFO.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The buffer containing the data to send </td></tr>
    <tr><td class="paramname">buffer_size</td><td>The size of the data buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>

</div>
</div>
<a id="a56c124828f8698eb09691e336e45aee1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56c124828f8698eb09691e336e45aee1">&#9670;&nbsp;</a></span>sunxi_usb_send_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sunxi_usb_send_setup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a>&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a setup packet. </p>
<p>This function sends a setup packet over USB. If the length is zero, it sends a zero-length packet. Otherwise, it selects the appropriate FIFO, writes the packet to the FIFO, and calls <a class="el" href="../../d9/db4/usb_8c.html#a629d56bf2c3121648905786afac04311" title="Handle USB write complete event.">sunxi_usb_write_complete()</a> to handle the completion of the write operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">length</td><td>The length of the setup packet </td></tr>
    <tr><td class="paramname">buffer</td><td>The buffer containing the setup packet </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad09a492d86e5c938734580a45b8b37ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09a492d86e5c938734580a45b8b37ab">&#9670;&nbsp;</a></span>sunxi_usb_set_address()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sunxi_usb_set_address </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a>&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set USB device address. </p>
<p>This function sets the USB device address to the specified address. It updates the address value in the sunxi_udc_source structure and calls <a class="el" href="../../df/db0/usb__device_8h.html#a373ea9807c38a396f04308f005585e18" title="Check the read data status of an endpoint of the USB device.">usb_device_read_data_status()</a> to handle the status phase of the control transfer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>The USB device address to set </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SUNXI_USB_REQ_SUCCESSED on success </dd></dl>

</div>
</div>
<a id="af7848df1ff28daae75df3755ff0942c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7848df1ff28daae75df3755ff0942c4">&#9670;&nbsp;</a></span>sunxi_usb_start_recv_by_dma()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sunxi_usb_start_recv_by_dma </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>mem_base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a>&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start receiving data by DMA. </p>
<p>This function starts receiving data by DMA. It configures the USB controller to use DMA for receiving, flushes the cache, enables DMA transfer, and restores the active endpoint after the transfer is started.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mem_base</td><td>The base address of the memory buffer </td></tr>
    <tr><td class="paramname">length</td><td>The length of the data to be received </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>

</div>
</div>
<a id="a629d56bf2c3121648905786afac04311"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a629d56bf2c3121648905786afac04311">&#9670;&nbsp;</a></span>sunxi_usb_write_complete()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sunxi_usb_write_complete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a6d57c383c80c05cc98c05d6dfec72756">uint64_t</a>&#160;</td>
          <td class="paramname"><em>husb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a>&#160;</td>
          <td class="paramname"><em>ep_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a>&#160;</td>
          <td class="paramname"><em>complete</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle USB write complete event. </p>
<p>This function is called when a USB write operation is completed. It updates the write data status using <a class="el" href="../../df/db0/usb__device_8h.html#a865815fc3a5de5202157a1bda0fe8842" title="Check the write data status of an endpoint of the USB device.">usb_device_write_data_status()</a>, waits for the transmit packet to be sent out, and clears the data end and IRQ if the endpoint type is EP0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">husb</td><td>The USB handle </td></tr>
    <tr><td class="paramname">ep_type</td><td>The type of the endpoint </td></tr>
    <tr><td class="paramname">complete</td><td>The completion status of the write operation </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<a id="a2e87520bc4757da6c63cb9c76f9981c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e87520bc4757da6c63cb9c76f9981c3">&#9670;&nbsp;</a></span>sunxi_usb_write_fifo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int sunxi_usb_write_fifo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#af7aa217d9ae1abca94f93e4052ee9689">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a80a9c870f4d95f081766ab33e8f001ee">uint32_t</a>&#160;</td>
          <td class="paramname"><em>buffer_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write data to the USB FIFO. </p>
<p>This function writes data from the buffer to the USB FIFO. It selects the appropriate endpoint, calculates the transfer size, and repeatedly calls <a class="el" href="../../d6/d38/usb__controller_8h.html#a8f2354f1281116739691dcc6bd90848f">usb_controller_write_packet()</a> to write data to the FIFO until all data is transferred. After each write, it calls <a class="el" href="../../d9/db4/usb_8c.html#a629d56bf2c3121648905786afac04311" title="Handle USB write complete event.">sunxi_usb_write_complete()</a> to handle the completion of the write operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The buffer containing the data to be written </td></tr>
    <tr><td class="paramname">buffer_size</td><td>The size of the buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aa890440fed5074f25f530c81347b21ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa890440fed5074f25f530c81347b21ed">&#9670;&nbsp;</a></span>dma_rec_addr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a6d57c383c80c05cc98c05d6dfec72756">uint64_t</a> dma_rec_addr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aea269807f49604f699c54ead46a5a723"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea269807f49604f699c54ead46a5a723">&#9670;&nbsp;</a></span>dma_rec_flag</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int dma_rec_flag</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a59c84d87a896229949240ebc45d5e4c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59c84d87a896229949240ebc45d5e4c1">&#9670;&nbsp;</a></span>dma_rec_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#a6d57c383c80c05cc98c05d6dfec72756">uint64_t</a> dma_rec_size</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="adb07ee7a62c92e37413d839f2862742c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb07ee7a62c92e37413d839f2862742c">&#9670;&nbsp;</a></span>sunxi_ubuf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/de4/usb_8h.html#aa2df59490f6a261d55e1697c86ccfbef">sunxi_ubuf_t</a> <a class="el" href="../../df/df3/structsunxi__ubuf.html">sunxi_ubuf</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0026169528a4e5b0a1c74953fc606c71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0026169528a4e5b0a1c74953fc606c71">&#9670;&nbsp;</a></span>sunxi_udc_source</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/de4/usb_8h.html#a7493841d696969118eb6fc9c1c02322a">sunxi_udc_t</a> sunxi_udc_source</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0c6e7ef4efec7a789e8041368c60ab3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c6e7ef4efec7a789e8041368c60ab3a">&#9670;&nbsp;</a></span>sunxi_udev_active</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/de4/usb_8h.html#a24f88480424e71d7b3b79b183fb7f791">sunxi_usb_setup_req_t</a>* sunxi_udev_active</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2e8d3e6235fe5225f699770b43c3b2d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e8d3e6235fe5225f699770b43c3b2d3">&#9670;&nbsp;</a></span>sunxi_usb_ep0_buffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#af7aa217d9ae1abca94f93e4052ee9689">uint8_t</a> sunxi_usb_ep0_buffer[<a class="el" href="../../d9/db4/usb_8c.html#a6d906c51d39530891897589b3bf02425">SUNXI_USB_EP0_BUFFER_SIZE</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a358bc99c1d11a8c6dc90873ea0166204"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a358bc99c1d11a8c6dc90873ea0166204">&#9670;&nbsp;</a></span>usb_dma_trans_unaliged_bytes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#af7aa217d9ae1abca94f93e4052ee9689">uint8_t</a> usb_dma_trans_unaliged_bytes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad619a13180f18e56723d5ed0bf9940f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad619a13180f18e56723d5ed0bf9940f8">&#9670;&nbsp;</a></span>usb_dma_trans_unaligned_buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d3e/board_2100ask-t113i_2load__c906_2c906__firmware_2include_2stdint_8h.html#af7aa217d9ae1abca94f93e4052ee9689">uint8_t</a>* usb_dma_trans_unaligned_buf</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
